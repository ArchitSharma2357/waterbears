<footer>
  <hr />
  {{ if .Site.Params.social }}
    <p id="social">
      Find me around the web:
      <br />
      {{ range $i, $e := .Site.Params.social }}
        {{ if $i }} | {{ end }}
        <a href="{{ .url }}">{{ .name }}</a>
      {{ end }}
    </p>
  {{ end }}

  <p class="copyright">
    Copyright Â© {{ now.Format "2006"}}
    <strong>{{ default "Blog Author" .Site.Params.Author }}</strong>.
  </p>


  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabase = supabase.createClient(
      'https://cmbmfdtmofhidxjugtcd.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNtYm1mZHRtb2ZoaWR4anVndGNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUyNzEwMTAsImV4cCI6MjA2MDg0NzAxMH0.y1XJNaw380hgC7Mkkl79ugvXZUfjRqMyMsnEfUXmQ8Q'
    );
  
    const toggleBtn = document.getElementById('auth-toggle');
    const modal = document.getElementById('auth-modal');
    const emailInput = document.getElementById('auth-email');
    const passInput = document.getElementById('auth-password');
    const submitBtn = document.getElementById('auth-submit');
    const logoutBtn = document.getElementById('logout-btn');
    const googleBtn = document.getElementById('google-login');
    const switchAuth = document.getElementById('toggle-signup');
  
    let isSignup = false;
  
    toggleBtn.onclick = () => {
      modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
    };
  
    switchAuth.onclick = () => {
      isSignup = !isSignup;
      submitBtn.textContent = isSignup ? 'Sign Up' : 'Login';
      switchAuth.textContent = isSignup ? 'Switch to Login' : 'Switch to Sign Up';
    };
  
    // Handle Sign Up / Sign In Submit
    submitBtn.onclick = async (e) => {
      e.preventDefault();
      const email = emailInput.value;
      const password = passInput.value;
  
      let result;
      if (isSignup) {
        result = await supabase.auth.signUp({ email, password });
      } else {
        result = await supabase.auth.signInWithPassword({ email, password });
      }
  
      if (result.error) alert(result.error.message);
      else updateUI();
    };
  
    // Handle Log Out
    logoutBtn.onclick = async () => {
      await supabase.auth.signOut();
      updateUI();
    };
  
    // Handle Google Login
    googleBtn.onclick = async () => {
      const { error } = await supabase.auth.signInWithOAuth({ provider: 'google' });
      if (error) alert(error.message);
    };
  
    // Update UI based on login status
    async function updateUI() {
      const { data: { session } } = await supabase.auth.getSession();
      if (session?.user) {
        toggleBtn.textContent = session.user.email.split('@')[0];
        logoutBtn.style.display = 'block';
        submitBtn.style.display = googleBtn.style.display = switchAuth.style.display = 'none';
      } else {
        toggleBtn.textContent = 'Login';
        logoutBtn.style.display = 'none';
        submitBtn.style.display = googleBtn.style.display = switchAuth.style.display = 'block';
      }
      modal.style.display = 'none';
    }
  
    // Listen for Auth State Changes
    supabase.auth.onAuthStateChange(updateUI);
    updateUI(); // Initial UI check
  </script>